<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mon Magasin - Boutique en ligne</title>
    <style>
        /* Variables CSS */
        :root {
            --primary-color: #0A2E68;
            --secondary-color: #1F4F9E;
            --accent-color: #2E6BFF;
            --filter-color: #FF6B35;
            --text-light: #FFFFFF;
            --text-dark: #333333;
            --bg-light: #F5F7FA;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --transition: all 0.3s ease;
        }

        /* Reset et styles de base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            overflow-x: hidden;
        }

        h1, h2, h3, h4, h5, h6 {
            font-weight: 700;
            line-height: 1.2;
            margin-bottom: 1rem;
        }

        p {
            margin-bottom: 1rem;
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        ul {
            list-style: none;
        }

        img {
            max-width: 100%;
            height: auto;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
        }

        .btn {
            display: inline-block;
            padding: 12px 30px;
            background-color: var(--primary-color);
            color: var(--text-light);
            border: none;
            border-radius: 5px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
        }

        .btn:hover {
            background-color: var(--secondary-color);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .btn-secondary {
            background-color: transparent;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
        }

        .btn-secondary:hover {
            background-color: var(--primary-color);
            color: var(--text-light);
        }

        .btn-success {
            background-color: var(--success-color);
        }

        .btn-warning {
            background-color: var(--warning-color);
            color: var(--text-dark);
        }

        .btn-whatsapp {
            background-color: #25D366;
        }

        .btn-messenger {
            background-color: #0084FF;
        }

        .btn-direct {
            background-color: var(--accent-color);
        }

        /* Navigation */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: rgba(10, 46, 104, 0.95);
            padding: 1rem 0;
            z-index: 1000;
            transition: var(--transition);
        }

        .navbar.scrolled {
            padding: 0.7rem 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-img {
            height: 50px;
            width: 150px;
            object-fit: cover;
            border-radius: 5px;
            background-color: white;
            padding: 5px;
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-light);
        }

        .logo-text span {
            color: var(--accent-color);
        }

        .nav-menu {
            display: flex;
            gap: 1.5rem;
        }

        .nav-link {
            color: var(--text-light);
            font-weight: 500;
            transition: var(--transition);
            padding: 0.5rem 1rem;
            border-radius: 5px;
            font-size: 0.9rem;
        }

        .nav-link:hover {
            color: var(--accent-color);
            background-color: rgba(255, 255, 255, 0.1);
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .cart-icon {
            position: relative;
            color: var(--text-light);
            font-size: 1.2rem;
            cursor: pointer;
            transition: var(--transition);
            padding: 8px 12px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
        }

        .cart-icon:hover {
            color: var(--accent-color);
            background-color: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: var(--accent-color);
            color: white;
            font-size: 0.7rem;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .products-icon {
            position: relative;
            color: var(--text-light);
            font-size: 1.2rem;
            cursor: pointer;
            transition: var(--transition);
            padding: 8px 12px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
        }

        .products-icon:hover {
            color: var(--accent-color);
            background-color: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .hamburger {
            display: none;
            flex-direction: column;
            cursor: pointer;
        }

        .hamburger span {
            width: 25px;
            height: 3px;
            background-color: var(--text-light);
            margin: 3px 0;
            transition: var(--transition);
        }

        .mobile-menu {
            position: fixed;
            top: 0;
            right: -100%;
            width: 80%;
            height: 100vh;
            background-color: var(--primary-color);
            padding: 2rem;
            z-index: 1001;
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .mobile-menu.active {
            right: 0;
        }

        .mobile-menu ul {
            text-align: center;
            width: 100%;
        }

        .mobile-menu li {
            margin: 1rem 0;
            width: 100%;
        }

        .mobile-menu a {
            color: var(--text-light);
            font-size: 1.1rem;
            font-weight: 500;
            transition: var(--transition);
            display: block;
            padding: 0.8rem 1rem;
            border-radius: 5px;
        }

        .mobile-menu a:hover {
            color: var(--accent-color);
            background-color: rgba(255, 255, 255, 0.1);
        }

        .close-menu {
            position: absolute;
            top: 20px;
            right: 20px;
            color: var(--text-light);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.1);
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Hero Section */
        .hero {
            height: 100vh;
            display: flex;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .hero-content {
            text-align: center;
            color: var(--text-light);
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 1s forwards 0.5s;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1.5rem;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .hero p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Sections */
        .section {
            padding: 5rem 0;
        }

        .section-title {
            text-align: center;
            margin-bottom: 3rem;
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 3px;
            background-color: var(--accent-color);
        }

        /* Services Section - Hidden if no services */
        .services {
            background-color: var(--bg-light);
            display: none; /* Hidden by default */
        }

        .services.visible {
            display: block;
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .service-card {
            background-color: white;
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: var(--transition);
            text-align: center;
            opacity: 0;
            transform: translateY(20px);
        }

        .service-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }

        .service-icon {
            font-size: 2.5rem;
            color: var(--accent-color);
            margin-bottom: 1rem;
        }

        .service-card h3 {
            margin-bottom: 1rem;
        }

        /* Products Preview Section */
        .products-preview {
            background-color: white;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .product-card {
            background-color: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: var(--transition);
            position: relative;
            display: flex;
            flex-direction: column;
            height: 100%;
            cursor: pointer;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .product-badge {
            position: absolute;
            top: 12px;
            left: 12px;
            background: var(--accent-color);
            color: white;
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            z-index: 2;
        }

        .product-badge.new {
            background: var(--success-color);
        }

        .product-badge.sale {
            background: var(--warning-color);
            color: var(--text-dark);
        }

        .product-image {
            height: 200px;
            background: var(--bg-light);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition);
        }

        .product-card:hover .product-image img {
            transform: scale(1.05);
        }

        .product-info {
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            flex-grow: 1;
        }

        .product-category {
            color: var(--secondary-color);
            font-size: 0.85rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .product-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-dark);
            line-height: 1.3;
        }

        .product-description {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 1rem;
            line-height: 1.4;
            flex-grow: 1;
        }

        .product-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .product-price {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--accent-color);
        }

        .product-old-price {
            font-size: 0.9rem;
            color: #999;
            text-decoration: line-through;
            margin-left: 0.5rem;
        }

        .product-stock {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.85rem;
        }

        .stock-available {
            color: var(--success-color);
        }

        .stock-low {
            color: var(--warning-color);
        }

        .stock-unavailable {
            color: #dc3545;
        }

        .stock-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .stock-available .stock-dot {
            background: var(--success-color);
        }

        .stock-low .stock-dot {
            background: var(--warning-color);
        }

        .stock-unavailable .stock-dot {
            background: #dc3545;
        }

        .product-actions {
            display: flex;
            gap: 10px;
            margin-top: auto;
        }

        .view-more-container {
            text-align: center;
            margin-top: 3rem;
        }

        /* Product Details Page for Featured Products */
        .product-details-page {
            display: none;
            padding-top: 100px;
            min-height: 100vh;
            background-color: var(--bg-light);
        }

        .product-details-page.active {
            display: block;
        }

        .back-to-products {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 2rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .back-to-products:hover {
            color: var(--accent-color);
            transform: translateX(-5px);
        }

        .product-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .product-gallery {
            position: relative;
        }

        .main-product-image {
            width: 100%;
            height: 400px;
            object-fit: cover;
        }

        .product-thumbnails {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            padding: 0 10px 10px;
        }

        .product-thumbnail {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 5px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: var(--transition);
        }

        .product-thumbnail.active {
            border-color: var(--accent-color);
        }

        .product-info-details {
            padding: 2rem;
        }

        .product-category-details {
            color: var(--secondary-color);
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
        }

        .product-title-details {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--text-dark);
        }

        .product-rating {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .rating-stars {
            color: var(--warning-color);
        }

        .rating-count {
            color: #666;
            font-size: 0.9rem;
        }

        .product-price-details {
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent-color);
            margin-bottom: 1rem;
        }

        .product-old-price-details {
            font-size: 1.2rem;
            color: #999;
            text-decoration: line-through;
            margin-left: 0.5rem;
        }

        .product-stock-details {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            font-size: 1rem;
        }

        .product-description-details {
            color: #666;
            line-height: 1.6;
            margin-bottom: 2rem;
        }

        .product-features {
            margin-bottom: 2rem;
        }

        .product-features h4 {
            margin-bottom: 1rem;
            color: var(--text-dark);
        }

        .features-list {
            list-style: disc;
            padding-left: 1.5rem;
            color: #666;
        }

        .features-list li {
            margin-bottom: 0.5rem;
        }

        .add-to-cart-details {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .quantity-selector {
            display: flex;
            align-items: center;
            border: 1px solid #ddd;
            border-radius: 5px;
            overflow: hidden;
        }

        .quantity-btn {
            background: none;
            border: none;
            padding: 0.8rem 1rem;
            cursor: pointer;
            font-size: 1.2rem;
            background-color: #f5f5f5;
            transition: var(--transition);
        }

        .quantity-btn:hover {
            background-color: #e0e0e0;
        }

        .quantity-input {
            width: 50px;
            text-align: center;
            border: none;
            padding: 0.8rem 0;
            font-size: 1rem;
            border-left: 1px solid #ddd;
            border-right: 1px solid #ddd;
        }

        /* All Products Page */
        .all-products-page {
            display: none;
            padding-top: 100px;
            min-height: 100vh;
            background-color: var(--bg-light);
        }

        .all-products-page.active {
            display: block;
        }

        .products-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .products-count {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        .products-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .filter-toggle {
            background: var(--filter-color);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
            transition: var(--transition);
        }

        .filter-toggle:hover {
            background: #e55a2b;
            transform: translateY(-2px);
        }

        /* Order Page */
        .order-page {
            display: none;
            padding-top: 100px;
            min-height: 100vh;
            background-color: var(--bg-light);
        }

        .order-page.active {
            display: block;
        }

        .order-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
        }

        .order-header {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
        }

        .order-form {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .order-summary {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #eee;
        }

        .summary-total {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .order-actions {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 2rem;
        }

        .order-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 1rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1.1rem;
        }

        .order-btn i {
            font-size: 1.2rem;
        }

        .order-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        /* Filters Modal */
        .filters-modal {
            position: fixed;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100vh;
            background: white;
            z-index: 1002;
            transition: var(--transition);
            overflow-y: auto;
            padding: 2rem;
        }

        .filters-modal.active {
            left: 0;
        }

        .filters-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--bg-light);
        }

        .filters-header h2 {
            color: var(--primary-color);
            font-size: 1.5rem;
        }

        .close-filters {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-dark);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: var(--transition);
        }

        .close-filters:hover {
            background: var(--bg-light);
        }

        .filter-group {
            margin-bottom: 2rem;
            background: var(--bg-light);
            padding: 1.5rem;
            border-radius: 10px;
        }

        .filter-group h3 {
            margin-bottom: 1rem;
            color: var(--primary-color);
            font-size: 1.1rem;
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: 0.5rem;
        }

        .filter-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 0.8rem;
        }

        .filter-option {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            transition: var(--transition);
            padding: 0.8rem;
            border-radius: 8px;
            background: white;
        }

        .filter-option:hover {
            background: #e8f0ff;
        }

        .filter-option input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: var(--filter-color);
        }

        .price-range {
            width: 100%;
            margin: 1rem 0;
        }

        .price-inputs {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .price-input {
            flex: 1;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            text-align: center;
            font-size: 1rem;
        }

        .filter-actions {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
            position: sticky;
            bottom: 0;
            background: white;
            padding: 1rem 0;
            border-top: 1px solid #eee;
        }

        .filter-btn {
            flex: 1;
            padding: 1rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1rem;
        }

        .filter-btn.apply {
            background: var(--filter-color);
            color: white;
        }

        .filter-btn.apply:hover {
            background: #e55a2b;
        }

        .filter-btn.reset {
            background: #6c757d;
            color: white;
        }

        .filter-btn.reset:hover {
            background: #5a6268;
        }

        /* Enhanced Product Cards for All Products */
        .all-products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin-top: 3rem;
            flex-wrap: wrap;
        }

        .pagination-btn {
            padding: 0.8rem 1.5rem;
            border: 1px solid #ddd;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 500;
        }

        .pagination-btn:hover:not(:disabled) {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .pagination-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .pagination-numbers {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .pagination-number {
            padding: 0.8rem 1.2rem;
            border: 1px solid #ddd;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        .pagination-number.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .pagination-number:hover:not(.active) {
            background: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
        }

        /* Cart Sidebar */
        .cart-sidebar {
            position: fixed;
            top: 0;
            right: -400px;
            width: 350px;
            height: 100vh;
            background-color: white;
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
            z-index: 1002;
            transition: var(--transition);
            display: flex;
            flex-direction: column;
        }

        .cart-sidebar.active {
            right: 0;
        }

        .cart-header {
            padding: 1.5rem;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cart-header h3 {
            margin: 0;
        }

        .close-cart {
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            color: var(--text-dark);
        }

        .cart-items {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
        }

        .cart-item {
            display: flex;
            gap: 1rem;
            padding: 1rem 0;
            border-bottom: 1px solid #eee;
        }

        .cart-item-img {
            width: 60px;
            height: 60px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            background-color: var(--bg-light);
        }

        .cart-item-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .cart-item-details {
            flex: 1;
        }

        .cart-item-details h4 {
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .cart-item-price {
            color: var(--accent-color);
            font-weight: 600;
        }

        .cart-item-quantity {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .cart-quantity-btn {
            background: none;
            border: 1px solid #ddd;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .cart-footer {
            padding: 1.5rem;
            border-top: 1px solid #eee;
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            font-weight: 600;
            font-size: 1.1rem;
        }

        /* Chat Bot */
        .chat-bot {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background-color: var(--accent-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 999;
            transition: var(--transition);
        }

        .chat-bot:hover {
            transform: scale(1.1);
            background-color: var(--secondary-color);
        }

        /* Chat Bot Modal */
        .chat-modal {
            position: fixed;
            bottom: 100px;
            right: 20px;
            width: 350px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            z-index: 1003;
            display: none;
            max-height: 400px;
            overflow: hidden;
        }

        .chat-modal.active {
            display: block;
        }

        .chat-header {
            background: var(--primary-color);
            color: white;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-header h3 {
            margin: 0;
            font-size: 1rem;
        }

        .chat-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
        }

        .chat-body {
            padding: 1rem;
            overflow-y: auto;
            max-height: 250px;
        }

        .chat-message {
            margin-bottom: 1rem;
            padding: 0.8rem;
            border-radius: 8px;
            max-width: 80%;
        }

        .user-message {
            background: #e8f0ff;
            margin-left: auto;
        }

        .bot-message {
            background: #f5f5f5;
        }

        .chat-input {
            display: flex;
            gap: 0.5rem;
            padding: 1rem;
            border-top: 1px solid #eee;
            background: white;
        }

        .chat-input input {
            flex: 1;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
        }

        .chat-input button {
            padding: 0.8rem 1.5rem;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
        }

        /* Social Media Icons */
        .social-media-icons {
            position: fixed;
            bottom: 90px;
            left: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 998;
        }

        .social-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            transition: var(--transition);
            cursor: pointer;
            text-decoration: none;
        }

        .social-icon:hover {
            transform: translateY(-5px);
        }

        .whatsapp-icon {
            background-color: #25D366;
        }

        .messenger-icon {
            background-color: #0084FF;
        }

        .facebook-icon {
            background-color: #1877F2;
        }

        .instagram-icon {
            background: linear-gradient(45deg, #405DE6, #5851DB, #833AB4, #C13584, #E1306C, #FD1D1D);
        }

        /* Social Media Icons Right */
        .social-media-icons-right {
            position: fixed;
            bottom: 90px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 998;
        }

        /* Footer */
        .footer {
            background-color: var(--primary-color);
            color: var(--text-light);
            padding: 3rem 0 1.5rem;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-column h3 {
            margin-bottom: 1.5rem;
            position: relative;
            padding-bottom: 10px;
        }

        .footer-column h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 40px;
            height: 2px;
            background-color: var(--accent-color);
        }

        .footer-links li {
            margin-bottom: 0.8rem;
        }

        .footer-links a {
            transition: var(--transition);
        }

        .footer-links a:hover {
            color: var(--accent-color);
            padding-left: 5px;
        }

        .social-icons {
            display: flex;
            gap: 15px;
            margin-top: 1rem;
        }

        .social-icon-footer {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            transition: var(--transition);
        }

        .social-icon-footer:hover {
            background-color: var(--accent-color);
            transform: translateY(-3px);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-dark);
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 1rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(10, 46, 104, 0.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        /* Animations */
        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Responsive */
        @media (max-width: 992px) {
            .hero h1 {
                font-size: 2.8rem;
            }
            
            .nav-menu {
                gap: 1rem;
            }
            
            .product-details {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .hamburger {
                display: flex;
            }
            
            .nav-menu {
                display: none;
            }

            .hero h1 {
                font-size: 2.2rem;
            }

            .hero p {
                font-size: 1rem;
            }
            
            .logo-text {
                display: none;
            }

            .cart-sidebar {
                width: 100%;
                right: -100%;
            }

            .products-grid, .all-products-grid {
                grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            }

            .products-header {
                flex-direction: column;
                align-items: stretch;
            }
            
            .products-controls {
                justify-content: space-between;
            }
            
            .filter-options {
                grid-template-columns: 1fr;
            }
            
            .filter-actions {
                flex-direction: column;
            }
            
            .pagination {
                gap: 0.5rem;
            }
            
            .pagination-btn {
                padding: 0.7rem 1rem;
                font-size: 0.9rem;
            }
            
            .pagination-number {
                padding: 0.7rem 1rem;
            }
            
            .add-to-cart-details {
                flex-direction: column;
                align-items: stretch;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .order-container {
                padding: 1rem;
            }

            .order-actions {
                flex-direction: column;
            }

            .chat-modal {
                width: 90%;
                right: 5%;
                bottom: 80px;
            }

            .social-media-icons {
                bottom: 80px;
                left: 10px;
            }

            .social-media-icons-right {
                bottom: 80px;
                right: 10px;
            }

            .social-icon {
                width: 45px;
                height: 45px;
                font-size: 1.2rem;
            }
        }

        @media (max-width: 576px) {
            .hero h1 {
                font-size: 1.8rem;
            }

            .section {
                padding: 3rem 0;
            }

            .products-grid, .all-products-grid {
                grid-template-columns: 1fr;
            }
            
            .product-meta {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }
            
            .products-controls {
                flex-direction: column;
                gap: 1rem;
            }
            
            .filter-toggle {
                width: 100%;
                justify-content: center;
            }
            
            .product-title-details {
                font-size: 1.5rem;
            }
            
            .product-price-details {
                font-size: 1.5rem;
            }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container nav-container">
            <a href="#" class="logo" onclick="showHomePage()">
                <div class="logo-img" id="siteLogo"></div>
                <div class="logo-text" id="siteName">Mon<span>Magasin</span></div>
            </a>
            
            <div class="nav-menu">
                <a href="#" class="nav-link" onclick="showHomePage()">Accueil</a>
                <a href="#products" class="nav-link" onclick="showHomePage()">Produits</a>
                <a href="#" class="nav-link" onclick="showAllProducts()">Tous les Produits</a>
                <a href="#" class="nav-link" onclick="showHomePage()">À propos</a>
                <a href="#" class="nav-link" onclick="showHomePage()">Contact</a>
            </div>
            
            <div class="nav-right">
                <a href="#" class="products-icon" id="productsIcon" onclick="showAllProducts(); return false;">
                    <i class="fas fa-store"></i>
                </a>
                <a href="#" class="cart-icon" id="cartIcon" onclick="showCart(); return false;">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count">0</span>
                </a>
                <div class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Mobile Menu -->
    <div class="mobile-menu">
        <div class="close-menu">
            <i class="fas fa-times"></i>
        </div>
        <ul>
            <li><a href="#" onclick="showHomePage()">Accueil</a></li>
            <li><a href="#products" onclick="showHomePage()">Produits</a></li>
            <li><a href="#" onclick="showAllProducts()">Tous les Produits</a></li>
            <li><a href="#" onclick="showHomePage()">À propos</a></li>
            <li><a href="#" onclick="showHomePage()">Contact</a></li>
        </ul>
    </div>

    <!-- Social Media Icons (Left Side) -->
    <div class="social-media-icons" id="socialIconsLeft">
        <!-- Icons will be added dynamically -->
    </div>

    <!-- Social Media Icons (Right Side) -->
    <div class="social-media-icons-right" id="socialIconsRight">
        <!-- Icons will be added dynamically -->
    </div>

    <!-- Main Content -->
    <div id="mainContent">
        <!-- Hero Section -->
        <section class="hero" id="heroSection">
            <div class="container">
                <div class="hero-content">
                    <h1 id="heroTitle">Mon Magasin</h1>
                    <p id="heroSubtitle">Votre destination de shopping en ligne</p>
                    <a href="#products" class="btn" onclick="showHomePage()">Découvrir nos produits</a>
                </div>
            </div>
        </section>

        <!-- Products Preview Section -->
        <section class="section products-preview" id="products">
            <div class="container">
                <h2 class="section-title" id="productsTitle">Nos Produits Populaires</h2>
                <p style="text-align: center; margin-bottom: 2rem; color: #666;" id="productsDescription">
                    Découvrez notre sélection de produits les plus populaires
                </p>
                <div class="products-grid" id="featuredProducts">
                    <!-- Les produits seront chargés ici dynamiquement -->
                </div>
                <div class="view-more-container">
                    <a href="#" class="btn btn-secondary" onclick="showAllProducts()">
                        <i class="fas fa-eye"></i> Voir Tous les Produits
                    </a>
                </div>
            </div>
        </section>
    </div>

    <!-- All Products Page -->
    <div class="all-products-page" id="allProductsPage">
        <div class="container">
            <div class="back-to-products" onclick="showHomePage()">
                <i class="fas fa-arrow-left"></i>
                Retour à l'accueil
            </div>

            <!-- Products Header -->
            <div class="products-header">
                <div class="products-count" id="productsCount">0 produits trouvés</div>
                <div class="products-controls">
                    <button class="filter-toggle" id="filterToggle">
                        <i class="fas fa-filter"></i>
                        Filtres
                    </button>
                </div>
            </div>

            <!-- Products Grid -->
            <div class="all-products-grid" id="allProductsGrid">
                <!-- Tous les produits seront chargés ici dynamiquement -->
            </div>

            <!-- Pagination -->
            <div class="pagination">
                <button class="pagination-btn" id="prevPage">
                    <i class="fas fa-chevron-left"></i>
                    Précédent
                </button>
                <div class="pagination-numbers" id="paginationNumbers">
                    <!-- Les numéros de page seront générés ici -->
                </div>
                <button class="pagination-btn" id="nextPage">
                    Suivant
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Product Details Page for Featured Products -->
    <div class="product-details-page" id="productDetailsPage">
        <div class="container">
            <div class="back-to-products" onclick="showHomePage()">
                <i class="fas fa-arrow-left"></i>
                Retour à l'accueil
            </div>

            <div class="product-details" id="productDetailsContent">
                <!-- Le contenu des détails du produit sera chargé ici dynamiquement -->
            </div>
        </div>
    </div>

    <!-- Product Details Page for All Products -->
    <div class="product-details-page" id="productDetailsPageAll">
        <div class="container">
            <div class="back-to-products" onclick="showAllProducts()">
                <i class="fas fa-arrow-left"></i>
                Retour aux Produits
            </div>

            <div class="product-details" id="productDetailsContentAll">
                <!-- Le contenu des détails du produit sera chargé ici dynamiquement -->
            </div>
        </div>
    </div>

    <!-- Order Page -->
    <div class="order-page" id="orderPage">
        <div class="order-container">
            <div class="back-to-products" onclick="showCart()">
                <i class="fas fa-arrow-left"></i>
                Retour au Panier
            </div>

            <div class="order-header">
                <h2 style="margin-bottom: 1rem; color: var(--text-dark);">Finaliser la Commande</h2>
                <p style="color: #666;">Veuillez remplir les informations ci-dessous pour compléter votre commande.</p>
            </div>

            <div class="order-summary" id="orderSummary">
                <!-- Résumé de la commande -->
            </div>

            <div class="order-form">
                <h3 style="margin: 2rem 0 1.5rem; color: var(--text-dark);">Informations Personnelles</h3>
                <form id="orderForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="firstName">Prénom *</label>
                            <input type="text" id="firstName" name="firstName" required>
                        </div>
                        <div class="form-group">
                            <label for="lastName">Nom *</label>
                            <input type="text" id="lastName" name="lastName" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="email">Email *</label>
                        <input type="email" id="email" name="email" required>
                    </div>

                    <div class="form-group">
                        <label for="phone">Téléphone *</label>
                        <input type="tel" id="phone" name="phone" required>
                    </div>

                    <h3 style="margin: 2rem 0 1.5rem; color: var(--text-dark);">Adresse de Livraison</h3>
                    
                    <div class="form-group">
                        <label for="address">Adresse *</label>
                        <input type="text" id="address" name="address" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="city">Ville *</label>
                            <input type="text" id="city" name="city" required>
                        </div>
                        <div class="form-group">
                            <label for="postalCode">Code Postal *</label>
                            <input type="text" id="postalCode" name="postalCode" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="notes">Instructions Spéciales (Optionnel)</label>
                        <textarea id="notes" name="notes" rows="4" placeholder="Indiquez toute instruction spéciale pour votre livraison..."></textarea>
                    </div>

                    <h3 style="margin: 2rem 0 1.5rem; color: var(--text-dark);">Méthode de Commande</h3>
                    
                    <div class="order-actions" id="orderMethods">
                        <!-- Les méthodes de commande seront chargées dynamiquement -->
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Filters Modal -->
    <div class="filters-modal" id="filtersModal">
        <div class="container">
            <div class="filters-header">
                <h2>Filtres</h2>
                <button class="close-filters" id="closeFilters">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="filter-group">
                <h3>Catégories</h3>
                <div class="filter-options">
                    <label class="filter-option">
                        <input type="checkbox" name="category" value="electronics" checked>
                        <span>Électronique</span>
                    </label>
                    <label class="filter-option">
                        <input type="checkbox" name="category" value="fashion" checked>
                        <span>Mode</span>
                    </label>
                    <label class="filter-option">
                        <input type="checkbox" name="category" value="home" checked>
                        <span>Maison</span>
                    </label>
                    <label class="filter-option">
                        <input type="checkbox" name="category" value="beauty" checked>
                        <span>Beauté</span>
                    </label>
                    <label class="filter-option">
                        <input type="checkbox" name="category" value="sports" checked>
                        <span>Sports</span>
                    </label>
                    <label class="filter-option">
                        <input type="checkbox" name="category" value="other" checked>
                        <span>Autre</span>
                    </label>
                </div>
            </div>

            <div class="filter-group">
                <h3>Prix (€)</h3>
                <input type="range" class="price-range" id="priceRange" min="0" max="1000" value="1000">
                <div class="price-inputs">
                    <input type="number" class="price-input" id="minPrice" placeholder="Min" value="0" min="0" max="1000">
                    <input type="number" class="price-input" id="maxPrice" placeholder="Max" value="1000" min="0" max="1000">
                </div>
            </div>

            <div class="filter-group">
                <h3>Disponibilité</h3>
                <div class="filter-options">
                    <label class="filter-option">
                        <input type="checkbox" name="availability" value="available" checked>
                        <span>En Stock</span>
                    </label>
                    <label class="filter-option">
                        <input type="checkbox" name="availability" value="low" checked>
                        <span>Stock Limitée</span>
                    </label>
                </div>
            </div>

            <div class="filter-actions">
                <button class="filter-btn apply" id="applyFilters">
                    <i class="fas fa-check"></i>
                    Appliquer les Filtres
                </button>
                <button class="filter-btn reset" id="resetFilters">
                    <i class="fas fa-redo"></i>
                    Réinitialiser
                </button>
            </div>
        </div>
    </div>

    <!-- Cart Sidebar -->
    <div class="cart-sidebar">
        <div class="cart-header">
            <h3>Votre Panier</h3>
            <button class="close-cart">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="cart-items" id="cartItems">
            <!-- Les articles du panier seront affichés ici -->
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Total:</span>
                <span id="cartTotal">0,00 €</span>
            </div>
            <button class="btn checkout-btn" id="checkoutBtn">
                <i class="fas fa-shopping-cart"></i>
                Commander
            </button>
        </div>
    </div>

    <!-- Chat Bot Modal -->
    <div class="chat-modal" id="chatModal">
        <div class="chat-header">
            <h3><i class="fas fa-comments"></i> Assistant</h3>
            <button class="chat-close" id="chatClose"><i class="fas fa-times"></i></button>
        </div>
        <div class="chat-body" id="chatBody">
            <div class="chat-message bot-message">
                Bonjour ! Je suis votre assistant virtuel. Comment puis-je vous aider aujourd'hui ?
            </div>
        </div>
        <div class="chat-input">
            <input type="text" id="chatInput" placeholder="Tapez votre message..." onkeypress="handleChatKeyPress(event)">
            <button onclick="sendMessage()">Envoyer</button>
        </div>
    </div>

    <!-- Chat Bot -->
    <div class="chat-bot" id="chatBot">
        <i class="fas fa-comments"></i>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3 id="footerTitle">Mon Magasin</h3>
                    <p id="footerDescription">Votre partenaire de confiance pour des achats en ligne.</p>
                    <div class="social-icons">
                        <a href="#" class="social-icon-footer"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social-icon-footer"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-icon-footer"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-icon-footer"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="footer-column">
                    <h3>Liens Rapides</h3>
                    <ul class="footer-links">
                        <li><a href="#" onclick="showHomePage()">Accueil</a></li>
                        <li><a href="#products" onclick="showHomePage()">Produits</a></li>
                        <li><a href="#" onclick="showAllProducts()">Tous les Produits</a></li>
                        <li><a href="#" onclick="showHomePage()">À propos</a></li>
                        <li><a href="#" onclick="showHomePage()">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Contact</h3>
                    <ul class="footer-links">
                        <li><i class="fas fa-map-marker-alt"></i> Adresse</li>
                        <li><i class="fas fa-phone"></i> +212 5 00 00 00 00</li>
                        <li><i class="fas fa-envelope"></i> contact@magasin.ma</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; <span id="currentYear">2023</span> Mon Magasin. Tous droits réservés.</p>
            </div>
        </div>
    </footer>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>

    <script>
        // Configuration Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyDcZcD5gGwI5JRcphJxrWTXEE_v2QaBT8Y",
            authDomain: "waeilstore1.firebaseapp.com",
            databaseURL: "https://waeilstore1-default-rtdb.firebaseio.com",
            projectId: "waeilstore1",
            storageBucket: "waeilstore1.firebasestorage.app",
            messagingSenderId: "205531361584",
            appId: "1:205531361584:web:0c8152e7ec31e653d158f5",
            measurementId: "G-T91695J9DT"
        };

        // Initialiser Firebase
        let app, database, auth;
        try {
            app = firebase.initializeApp(firebaseConfig);
            database = firebase.database();
            auth = firebase.auth();
        } catch (error) {
            console.error("Erreur d'initialisation Firebase:", error);
        }

        // Variables globales
        let cart = [];
        let currentPage = 1;
        const productsPerPage = 6;
        let filteredProducts = [];
        let siteContent = {};
        let socialSettings = {};
        let allProductsData = [];
        let orderSettings = {};

        // Navigation entre les pages
        function showHomePage() {
            document.getElementById('mainContent').style.display = 'block';
            document.getElementById('allProductsPage').classList.remove('active');
            document.getElementById('productDetailsPage').classList.remove('active');
            document.getElementById('productDetailsPageAll').classList.remove('active');
            document.getElementById('orderPage').classList.remove('active');
            window.scrollTo({ top: 0, behavior: 'smooth' });
            loadFeaturedProducts();
        }

        function showAllProducts() {
            document.getElementById('mainContent').style.display = 'none';
            document.getElementById('allProductsPage').classList.add('active');
            document.getElementById('productDetailsPage').classList.remove('active');
            document.getElementById('productDetailsPageAll').classList.remove('active');
            document.getElementById('orderPage').classList.remove('active');
            window.scrollTo({ top: 0, behavior: 'smooth' });
            displayAllProducts();
        }

        function showProductDetails(productId) {
            document.getElementById('mainContent').style.display = 'none';
            document.getElementById('allProductsPage').classList.remove('active');
            document.getElementById('productDetailsPageAll').classList.remove('active');
            document.getElementById('productDetailsPage').classList.add('active');
            document.getElementById('orderPage').classList.remove('active');
            window.scrollTo({ top: 0, behavior: 'smooth' });
            displayProductDetails(productId, 'productDetailsPage');
        }

        function showProductDetailsAll(productId) {
            document.getElementById('mainContent').style.display = 'none';
            document.getElementById('allProductsPage').classList.remove('active');
            document.getElementById('productDetailsPage').classList.remove('active');
            document.getElementById('productDetailsPageAll').classList.add('active');
            document.getElementById('orderPage').classList.remove('active');
            window.scrollTo({ top: 0, behavior: 'smooth' });
            displayProductDetails(productId, 'productDetailsPageAll');
        }

        // Affichage du panier
        function showCart() {
            document.querySelector('.cart-sidebar').classList.add('active');
            displayCart();
        }

        // Affichage de la page de commande
        function showOrderPage() {
            if (cart.length === 0) {
                alert("Votre panier est vide. Ajoutez des produits avant de commander.");
                return;
            }
            
            document.getElementById('mainContent').style.display = 'none';
            document.getElementById('allProductsPage').classList.remove('active');
            document.getElementById('productDetailsPage').classList.remove('active');
            document.getElementById('productDetailsPageAll').classList.remove('active');
            document.getElementById('orderPage').classList.add('active');
            document.querySelector('.cart-sidebar').classList.remove('active');
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            displayOrderSummary();
            loadOrderMethods();
        }

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            setupPriceRange();
            loadSiteContent();
            loadSocialSettings();
            loadOrderSettings();
            loadProductsFromFirebase();
            updateCartCount();
            
            // Animation des cartes
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver(function(entries) {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, observerOptions);

            document.querySelectorAll('.service-card, .product-card').forEach(card => {
                observer.observe(card);
            });

            // Année courante dans le footer
            document.getElementById('currentYear').textContent = new Date().getFullYear();
        });

        // Configuration des événements
        function setupEventListeners() {
            // Menu mobile
            document.querySelector('.hamburger').addEventListener('click', toggleMobileMenu);
            document.querySelector('.close-menu').addEventListener('click', toggleMobileMenu);

            // Cart functionality
            const cartIcon = document.getElementById('cartIcon');
            const cartSidebar = document.querySelector('.cart-sidebar');
            const closeCart = document.querySelector('.close-cart');
            const checkoutBtn = document.getElementById('checkoutBtn');

            cartIcon.addEventListener('click', function(e) {
                e.preventDefault();
                cartSidebar.classList.add('active');
                displayCart();
            });

            closeCart.addEventListener('click', function() {
                cartSidebar.classList.remove('active');
            });

            checkoutBtn.addEventListener('click', function() {
                showOrderPage();
            });

            // Filtres
            document.getElementById('filterToggle').addEventListener('click', openFilters);
            document.getElementById('closeFilters').addEventListener('click', closeFilters);
            document.getElementById('applyFilters').addEventListener('click', applyFilters);
            document.getElementById('resetFilters').addEventListener('click', resetFilters);

            // Pagination
            document.getElementById('prevPage').addEventListener('click', goToPrevPage);
            document.getElementById('nextPage').addEventListener('click', goToNextPage);

            // Chat bot
            const chatBot = document.getElementById('chatBot');
            const chatModal = document.getElementById('chatModal');
            const chatClose = document.getElementById('chatClose');

            chatBot.addEventListener('click', function() {
                chatModal.classList.add('active');
                setTimeout(() => {
                    document.getElementById('chatInput').focus();
                }, 100);
            });

            chatClose.addEventListener('click', function() {
                chatModal.classList.remove('active');
            });

            // Order form
            document.getElementById('orderForm').addEventListener('submit', function(e) {
                e.preventDefault();
                // Le traitement du formulaire se fait via les boutons de commande
            });

            // Scroll effect
            window.addEventListener('scroll', function() {
                const navbar = document.querySelector('.navbar');
                if (window.scrollY > 50) {
                    navbar.classList.add('scrolled');
                } else {
                    navbar.classList.remove('scrolled');
                }
            });

            // Fermer le panier en cliquant à l'extérieur
            document.addEventListener('click', function(event) {
                const cartSidebar = document.querySelector('.cart-sidebar');
                const cartIcon = document.getElementById('cartIcon');
                
                if (cartSidebar.classList.contains('active') && 
                    !cartSidebar.contains(event.target) && 
                    !cartIcon.contains(event.target)) {
                    cartSidebar.classList.remove('active');
                }
            });
        }

        // Menu mobile
        function toggleMobileMenu() {
            document.querySelector('.mobile-menu').classList.toggle('active');
        }

        // Charger le contenu du site depuis Firebase
        async function loadSiteContent() {
            try {
                if (database) {
                    const contentSnapshot = await database.ref('siteContent').once('value');
                    siteContent = contentSnapshot.val() || {};
                }
                
                // Appliquer le contenu du site
                applySiteContent();
            } catch (error) {
                console.error('Erreur lors du chargement du contenu:', error);
                // Utiliser le contenu par défaut
                applySiteContent();
            }
        }

        // Appliquer le contenu du site
        function applySiteContent() {
            // Logo du site
            const siteLogo = document.getElementById('siteLogo');
            if (siteContent.siteLogo) {
                siteLogo.style.backgroundImage = `url(${siteContent.siteLogo})`;
                siteLogo.style.backgroundSize = 'contain';
                siteLogo.style.backgroundRepeat = 'no-repeat';
                siteLogo.style.backgroundPosition = 'center';
            }

            // Nom du site
            if (siteContent.siteName) {
                document.getElementById('siteName').innerHTML = siteContent.siteName;
            }

            // Titre hero
            if (siteContent.mainTitle) {
                document.getElementById('heroTitle').textContent = siteContent.mainTitle;
            }

            // Sous-titre hero
            if (siteContent.subTitle) {
                document.getElementById('heroSubtitle').textContent = siteContent.subTitle;
            }

            // Titre des produits
            if (siteContent.productsTitle) {
                document.getElementById('productsTitle').textContent = siteContent.productsTitle;
            }

            // Description des produits
            if (siteContent.productsDescription) {
                document.getElementById('productsDescription').textContent = siteContent.productsDescription;
            }

            // Image de fond hero
            if (siteContent.heroImage) {
                const hero = document.getElementById('heroSection');
                hero.style.background = `
                    linear-gradient(135deg, rgba(10, 46, 104, 0.85) 0%, rgba(31, 79, 158, 0.85) 100%),
                    url(${siteContent.heroImage}) center/cover no-repeat
                `;
            } else {
                // Si aucune image n'est définie, utiliser un fond de couleur simple
                const hero = document.getElementById('heroSection');
                hero.style.background = 'linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%)';
            }

            // Titre du footer
            if (siteContent.siteName) {
                document.getElementById('footerTitle').textContent = siteContent.siteName;
            }

            // Description du footer
            if (siteContent.siteDescription) {
                document.getElementById('footerDescription').textContent = siteContent.siteDescription;
            }

            // Afficher/masquer la section services
            const servicesSection = document.querySelector('.services');
            if (siteContent.services && siteContent.services.length > 0) {
                servicesSection.classList.add('visible');
                loadServices();
            } else {
                servicesSection.classList.remove('visible');
            }
        }

        // Charger les services
        function loadServices() {
            const servicesGrid = document.querySelector('.services-grid');
            if (servicesGrid && siteContent.services) {
                servicesGrid.innerHTML = siteContent.services.map(service => `
                    <div class="service-card">
                        <div class="service-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <h3>${service}</h3>
                        <p>Service de qualité pour ${service.toLowerCase()}</p>
                    </div>
                `).join('');
            }
        }

        // Charger les paramètres sociaux depuis Firebase
        async function loadSocialSettings() {
            try {
                if (database) {
                    const socialSnapshot = await database.ref('socialSettings').once('value');
                    socialSettings = socialSnapshot.val() || {};
                }
                
                // Appliquer les paramètres sociaux
                applySocialSettings();
            } catch (error) {
                console.error('Erreur lors du chargement des paramètres sociaux:', error);
            }
        }

        // Appliquer les paramètres sociaux
        function applySocialSettings() {
            const socialIconsLeft = document.getElementById('socialIconsLeft');
            const socialIconsRight = document.getElementById('socialIconsRight');
            
            // Vider les conteneurs
            socialIconsLeft.innerHTML = '';
            socialIconsRight.innerHTML = '';

            // Déterminer la position
            const position = socialSettings.position || 'bottom-right';
            const targetContainer = position === 'bottom-left' ? socialIconsLeft : socialIconsRight;

            // Ajouter les icônes
            if (socialSettings.whatsappUrl) {
                const whatsappIcon = document.createElement('a');
                whatsappIcon.href = socialSettings.whatsappUrl;
                whatsappIcon.target = '_blank';
                whatsappIcon.className = 'social-icon whatsapp-icon';
                whatsappIcon.innerHTML = '<i class="fab fa-whatsapp"></i>';
                targetContainer.appendChild(whatsappIcon);
            }

            if (socialSettings.messengerUrl) {
                const messengerIcon = document.createElement('a');
                messengerIcon.href = socialSettings.messengerUrl;
                messengerIcon.target = '_blank';
                messengerIcon.className = 'social-icon messenger-icon';
                messengerIcon.innerHTML = '<i class="fab fa-facebook-messenger"></i>';
                targetContainer.appendChild(messengerIcon);
            }

            if (socialSettings.facebookUrl) {
                const facebookIcon = document.createElement('a');
                facebookIcon.href = socialSettings.facebookUrl;
                facebookIcon.target = '_blank';
                facebookIcon.className = 'social-icon facebook-icon';
                facebookIcon.innerHTML = '<i class="fab fa-facebook-f"></i>';
                targetContainer.appendChild(facebookIcon);
            }

            if (socialSettings.instagramUrl) {
                const instagramIcon = document.createElement('a');
                instagramIcon.href = socialSettings.instagramUrl;
                instagramIcon.target = '_blank';
                instagramIcon.className = 'social-icon instagram-icon';
                instagramIcon.innerHTML = '<i class="fab fa-instagram"></i>';
                targetContainer.appendChild(instagramIcon);
            }
        }

        // Charger les paramètres de commande
        async function loadOrderSettings() {
            try {
                if (database) {
                    const orderSnapshot = await database.ref('orderSettings').once('value');
                    orderSettings = orderSnapshot.val() || {};
                    
                    // Valeurs par défaut si non définies
                    if (orderSettings.whatsappEnabled === undefined) orderSettings.whatsappEnabled = true;
                    if (orderSettings.messengerEnabled === undefined) orderSettings.messengerEnabled = true;
                    if (orderSettings.directOrderEnabled === undefined) orderSettings.directOrderEnabled = true;
                    if (!orderSettings.whatsappNumber) orderSettings.whatsappNumber = '';
                    if (!orderSettings.messengerLink) orderSettings.messengerLink = '';
                } else {
                    orderSettings = {
                        whatsappEnabled: true,
                        messengerEnabled: true,
                        directOrderEnabled: true,
                        whatsappNumber: '',
                        messengerLink: ''
                    };
                }
            } catch (error) {
                console.error('Erreur lors du chargement des paramètres de commande:', error);
                orderSettings = {
                    whatsappEnabled: true,
                    messengerEnabled: true,
                    directOrderEnabled: true,
                    whatsappNumber: '',
                    messengerLink: ''
                };
            }
        }

        // Charger les produits depuis Firebase
        async function loadProductsFromFirebase() {
            try {
                if (database) {
                    const productsSnapshot = await database.ref('products').once('value');
                    const products = productsSnapshot.val();
                    
                    if (products) {
                        // Convertir l'objet en tableau
                        allProductsData = Object.values(products);
                        console.log('Produits chargés depuis Firebase:', allProductsData.length);
                    } else {
                        // Si Firebase est vide, initialiser avec un tableau vide
                        allProductsData = [];
                        console.log('Aucun produit trouvé dans Firebase');
                    }
                } else {
                    // Si Firebase n'est pas initialisé, initialiser avec un tableau vide
                    allProductsData = [];
                    console.log('Firebase non initialisé, tableau de produits vide');
                }
                
                // Initialiser les produits filtrés
                filteredProducts = [...allProductsData];
                
                // Charger les produits en vedette
                loadFeaturedProducts();
            } catch (error) {
                console.error('Erreur lors du chargement des produits:', error);
                // En cas d'erreur, initialiser avec un tableau vide
                allProductsData = [];
                filteredProducts = [];
                loadFeaturedProducts();
            }
        }

        // Charger les produits en vedette
        function loadFeaturedProducts() {
            const featuredProductsGrid = document.getElementById('featuredProducts');
            if (!featuredProductsGrid) return;
            
            if (allProductsData.length === 0) {
                featuredProductsGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 3rem; color: #666;">
                        <i class="fas fa-box-open" style="font-size: 3rem; margin-bottom: 1rem; color: #ddd;"></i>
                        <h3>Aucun produit disponible</h3>
                        <p>Les produits seront affichés ici une fois ajoutés à votre boutique.</p>
                    </div>
                `;
                return;
            }
            
            // Prendre les 10 premiers produits (ou moins s'il y en a moins de 10)
            const featuredProducts = allProductsData.slice(0, 10);
            
            featuredProductsGrid.innerHTML = featuredProducts.map(product => `
                <div class="product-card" onclick="showProductDetails('${product.id}')">
                    ${product.badge ? `<div class="product-badge ${product.badge}">${product.badge === 'new' ? 'Nouveau' : 'Promo'}</div>` : ''}
                    <div class="product-image">
                        <img src="${product.image || getDefaultImage()}" alt="${product.name}" 
                             onerror="this.src='${getDefaultImage()}'">
                    </div>
                    <div class="product-info">
                        <div class="product-category">${getCategoryName(product.category)}</div>
                        <h3 class="product-title">${product.name}</h3>
                        <p class="product-description">${product.description}</p>
                        <div class="product-meta">
                            <div class="product-price">
                                ${product.price.toFixed(2)} €
                                ${product.oldPrice ? `<span class="product-old-price">${product.oldPrice.toFixed(2)} €</span>` : ''}
                            </div>
                            <div class="product-stock ${product.stock}">
                                <span class="stock-dot"></span>
                                <span>${getStockText(product.stock)}</span>
                            </div>
                        </div>
                        <div class="product-actions">
                            <button class="btn" onclick="event.stopPropagation(); addToCart('${product.id}')">
                                <i class="fas fa-shopping-cart"></i> Ajouter
                            </button>
                            <button class="btn btn-secondary" onclick="event.stopPropagation(); showProductDetails('${product.id}')">
                                <i class="fas fa-eye"></i> Voir
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Obtenir une image par défaut
        function getDefaultImage() {
            if (siteContent.defaultImages && siteContent.defaultImages.length > 0) {
                // Utiliser une image aléatoire parmi les images par défaut
                const randomIndex = Math.floor(Math.random() * siteContent.defaultImages.length);
                return siteContent.defaultImages[randomIndex];
            }
            return 'https://via.placeholder.com/400x300/0A2E68/FFFFFF?text=Produit';
        }

        // Affichage de tous les produits
        function displayAllProducts() {
            const allProductsGrid = document.getElementById('allProductsGrid');
            const startIndex = (currentPage - 1) * productsPerPage;
            const endIndex = startIndex + productsPerPage;
            const productsToShow = filteredProducts.slice(startIndex, endIndex);

            if (allProductsData.length === 0) {
                allProductsGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 3rem; color: #666;">
                        <i class="fas fa-box-open" style="font-size: 3rem; margin-bottom: 1rem; color: #ddd;"></i>
                        <h3>Aucun produit disponible</h3>
                        <p>Les produits seront affichés ici une fois ajoutés à votre boutique.</p>
                    </div>
                `;
            } else {
                allProductsGrid.innerHTML = productsToShow.map(product => `
                    <div class="product-card" onclick="showProductDetailsAll('${product.id}')">
                        ${product.badge ? `<div class="product-badge ${product.badge}">${product.badge === 'new' ? 'Nouveau' : 'Promo'}</div>` : ''}
                        <div class="product-image">
                            <img src="${product.image || getDefaultImage()}" alt="${product.name}" 
                                 onerror="this.src='${getDefaultImage()}'">
                        </div>
                        <div class="product-info">
                            <div class="product-category">${getCategoryName(product.category)}</div>
                            <h3 class="product-title">${product.name}</h3>
                            <p class="product-description">${product.description}</p>
                            <div class="product-meta">
                                <div class="product-price">
                                    ${product.price.toFixed(2)} €
                                    ${product.oldPrice ? `<span class="product-old-price">${product.oldPrice.toFixed(2)} €</span>` : ''}
                                </div>
                                <div class="product-stock ${product.stock}">
                                    <span class="stock-dot"></span>
                                    <span>${getStockText(product.stock)}</span>
                                </div>
                            </div>
                            <div class="product-actions">
                                <button class="btn" onclick="event.stopPropagation(); addToCart('${product.id}')">
                                    <i class="fas fa-shopping-cart"></i> Ajouter
                                </button>
                                <button class="btn btn-secondary" onclick="event.stopPropagation(); showProductDetailsAll('${product.id}')">
                                    <i class="fas fa-eye"></i> Voir
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
            }

            // Mettre à jour le compteur de produits
            document.getElementById('productsCount').textContent = `${filteredProducts.length} produits trouvés`;

            updatePagination();
        }

        // Affichage des détails du produit
        function displayProductDetails(productId, pageId) {
            const product = allProductsData.find(p => p.id == productId);
            const productDetailsContent = document.getElementById(pageId === 'productDetailsPage' ? 'productDetailsContent' : 'productDetailsContentAll');
            
            if (!product) {
                productDetailsContent.innerHTML = '<p>Produit non trouvé</p>';
                return;
            }

            const stars = generateStarRating(product.rating);
            const productImages = product.images && product.images.length > 0 ? product.images : [product.image || getDefaultImage()];
            
            productDetailsContent.innerHTML = `
                <div class="product-gallery">
                    <img src="${productImages[0]}" alt="${product.name}" class="main-product-image" id="mainProductImage">
                    <div class="product-thumbnails">
                        ${productImages.map((img, index) => `
                            <img src="${img}" alt="${product.name}" class="product-thumbnail ${index === 0 ? 'active' : ''}" 
                                 onclick="changeMainImage('${img}', this)"
                                 onerror="this.src='${getDefaultImage()}'">
                        `).join('')}
                    </div>
                </div>
                <div class="product-info-details">
                    <div class="product-category-details">${getCategoryName(product.category)}</div>
                    <h1 class="product-title-details">${product.name}</h1>
                    <div class="product-rating">
                        <div class="rating-stars">${stars}</div>
                        <div class="rating-count">(${product.reviewCount || 0} avis)</div>
                    </div>
                    <div class="product-price-details">
                        ${product.price.toFixed(2)} €
                        ${product.oldPrice ? `<span class="product-old-price-details">${product.oldPrice.toFixed(2)} €</span>` : ''}
                    </div>
                    <div class="product-stock-details ${product.stock}">
                        <span class="stock-dot"></span>
                        <span>${getStockText(product.stock)}</span>
                    </div>
                    <p class="product-description-details">${product.description}</p>
                    
                    ${product.features && product.features.length > 0 ? `
                    <div class="product-features">
                        <h4>Caractéristiques principales:</h4>
                        <ul class="features-list">
                            ${product.features.map(feature => `<li>${feature}</li>`).join('')}
                        </ul>
                    </div>
                    ` : ''}
                    
                    <div class="add-to-cart-details">
                        <div class="quantity-selector">
                            <button class="quantity-btn" onclick="decreaseQuantity()">-</button>
                            <input type="number" class="quantity-input" id="productQuantity" value="1" min="1" max="10">
                            <button class="quantity-btn" onclick="increaseQuantity()">+</button>
                        </div>
                        <button class="btn" onclick="addToCartFromDetails('${product.id}')">
                            <i class="fas fa-shopping-cart"></i> Ajouter au panier
                        </button>
                    </div>
                </div>
            `;
        }

        // Fonctions pour la galerie d'images
        function changeMainImage(src, element) {
            const mainImage = document.getElementById('mainProductImage');
            if (mainImage) {
                mainImage.src = src;
            }
            document.querySelectorAll('.product-thumbnail').forEach(thumb => {
                thumb.classList.remove('active');
            });
            element.classList.add('active');
        }

        // Fonctions pour la quantité
        function increaseQuantity() {
            const input = document.getElementById('productQuantity');
            if (input) input.value = parseInt(input.value) + 1;
        }

        function decreaseQuantity() {
            const input = document.getElementById('productQuantity');
            if (input && parseInt(input.value) > 1) input.value = parseInt(input.value) - 1;
        }

        // Génération des étoiles pour la notation
        function generateStarRating(rating) {
            const fullStars = Math.floor(rating);
            const halfStar = rating % 1 >= 0.5;
            const emptyStars = 5 - fullStars - (halfStar ? 1 : 0);
            
            return '★'.repeat(fullStars) + (halfStar ? '½' : '') + '☆'.repeat(emptyStars);
        }

        // Filtres modaux
        function openFilters() {
            document.getElementById('filtersModal').classList.add('active');
        }

        function closeFilters() {
            document.getElementById('filtersModal').classList.remove('active');
        }

        // Configuration de la plage de prix
        function setupPriceRange() {
            const priceRange = document.getElementById('priceRange');
            const minPrice = document.getElementById('minPrice');
            const maxPrice = document.getElementById('maxPrice');

            priceRange.addEventListener('input', function() {
                maxPrice.value = this.value;
            });

            minPrice.addEventListener('input', function() {
                if (parseInt(this.value) > parseInt(maxPrice.value)) {
                    this.value = maxPrice.value;
                }
                priceRange.min = this.value;
            });

            maxPrice.addEventListener('input', function() {
                if (parseInt(this.value) < parseInt(minPrice.value)) {
                    this.value = minPrice.value;
                }
                priceRange.value = this.value;
            });
        }

        // Application des filtres
        function applyFilters() {
            const selectedCategories = Array.from(document.querySelectorAll('input[name="category"]:checked')).map(cb => cb.value);
            const selectedAvailability = Array.from(document.querySelectorAll('input[name="availability"]:checked')).map(cb => cb.value);
            const minPrice = parseFloat(document.getElementById('minPrice').value) || 0;
            const maxPrice = parseFloat(document.getElementById('maxPrice').value) || 1000;

            filteredProducts = allProductsData.filter(product => {
                const categoryMatch = selectedCategories.includes(product.category);
                const availabilityMatch = selectedAvailability.includes(product.stock);
                const priceMatch = product.price >= minPrice && product.price <= maxPrice;

                return categoryMatch && availabilityMatch && priceMatch;
            });

            currentPage = 1;
            displayAllProducts();
            closeFilters();
        }

        // Réinitialisation des filtres
        function resetFilters() {
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = true;
            });
            document.getElementById('priceRange').value = 1000;
            document.getElementById('minPrice').value = 0;
            document.getElementById('maxPrice').value = 1000;
            applyFilters();
        }

        // Pagination
        function updatePagination() {
            const totalPages = Math.ceil(filteredProducts.length / productsPerPage);
            const paginationNumbers = document.getElementById('paginationNumbers');

            paginationNumbers.innerHTML = '';
            for (let i = 1; i <= totalPages; i++) {
                const pageNumber = document.createElement('button');
                pageNumber.className = `pagination-number ${i === currentPage ? 'active' : ''}`;
                pageNumber.textContent = i;
                pageNumber.addEventListener('click', () => goToPage(i));
                paginationNumbers.appendChild(pageNumber);
            }

            document.getElementById('prevPage').disabled = currentPage === 1;
            document.getElementById('nextPage').disabled = currentPage === totalPages || totalPages === 0;
        }

        function goToPage(page) {
            currentPage = page;
            displayAllProducts();
            updatePagination();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function goToPrevPage() {
            if (currentPage > 1) {
                goToPage(currentPage - 1);
            }
        }

        function goToNextPage() {
            const totalPages = Math.ceil(filteredProducts.length / productsPerPage);
            if (currentPage < totalPages) {
                goToPage(currentPage + 1);
            }
        }

        // Gestion du panier
        function addToCart(productId) {
            const product = allProductsData.find(p => p.id == productId);
            if (!product) return;

            const existingItem = cart.find(item => item.id == productId);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    id: product.id,
                    name: product.name,
                    price: product.price,
                    image: product.image || getDefaultImage(),
                    quantity: 1
                });
            }

            updateCartCount();
            showNotification(`${product.name} a été ajouté au panier!`);
            displayCart();
        }

        function addToCartFromDetails(productId) {
            const product = allProductsData.find(p => p.id == productId);
            if (!product) return;

            const quantityInput = document.getElementById('productQuantity');
            const quantity = quantityInput ? parseInt(quantityInput.value) : 1;
            
            const existingItem = cart.find(item => item.id == productId);
            if (existingItem) {
                existingItem.quantity += quantity;
            } else {
                cart.push({
                    id: product.id,
                    name: product.name,
                    price: product.price,
                    image: product.image || getDefaultImage(),
                    quantity: quantity
                });
            }

            updateCartCount();
            showNotification(`${quantity} x ${product.name} a été ajouté au panier!`);
            displayCart();
        }

        function displayCart() {
            const cartItems = document.getElementById('cartItems');
            const cartTotal = document.getElementById('cartTotal');

            if (cart.length === 0) {
                cartItems.innerHTML = `
                    <div style="text-align: center; padding: 2rem; color: #666;">
                        <i class="fas fa-shopping-cart" style="font-size: 3rem; margin-bottom: 1rem; color: #ddd;"></i>
                        <p>Votre panier est vide</p>
                        <button class="btn" style="margin-top: 1rem;" onclick="showAllProducts(); document.querySelector('.cart-sidebar').classList.remove('active')">
                            <i class="fas fa-shopping-bag"></i>
                            Parcourir les Produits
                        </button>
                    </div>
                `;
                cartTotal.textContent = '0,00 €';
                return;
            }

            cartItems.innerHTML = cart.map(item => `
                <div class="cart-item">
                    <div class="cart-item-img">
                        <img src="${item.image}" alt="${item.name}" onerror="this.src='${getDefaultImage()}'">
                    </div>
                    <div class="cart-item-details">
                        <h4>${item.name}</h4>
                        <div class="cart-item-price">${item.price.toFixed(2)} €</div>
                        <div class="cart-item-quantity">
                            <button class="cart-quantity-btn" onclick="decreaseCartItemQuantity('${item.id}')">-</button>
                            <span>${item.quantity}</span>
                            <button class="cart-quantity-btn" onclick="increaseCartItemQuantity('${item.id}')">+</button>
                            <button class="cart-quantity-btn" style="background: #dc3545; color: white; border-color: #dc3545; margin-left: 1rem;" onclick="removeFromCart('${item.id}')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');

            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            cartTotal.textContent = `${total.toFixed(2).replace('.', ',')} €`;
        }

        function increaseCartItemQuantity(productId) {
            const item = cart.find(item => item.id == productId);
            if (item) {
                item.quantity += 1;
                displayCart();
                updateCartCount();
            }
        }

        function decreaseCartItemQuantity(productId) {
            const item = cart.find(item => item.id == productId);
            if (item) {
                item.quantity -= 1;
                if (item.quantity <= 0) {
                    removeFromCart(productId);
                } else {
                    displayCart();
                    updateCartCount();
                }
            }
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id != productId);
            displayCart();
            updateCartCount();
        }

        function updateCartCount() {
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.querySelector('.cart-count').textContent = count;
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.textContent = message;
            notification.style.position = 'fixed';
            notification.style.bottom = '20px';
            notification.style.right = '20px';
            notification.style.background = 'var(--success-color)';
            notification.style.color = 'white';
            notification.style.padding = '1rem 2rem';
            notification.style.borderRadius = '8px';
            notification.style.boxShadow = '0 5px 15px rgba(0, 0, 0, 0.2)';
            notification.style.zIndex = '1003';
            notification.style.transition = 'all 0.3s ease';
            notification.style.opacity = '0';
            notification.style.transform = 'translateY(20px)';

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.opacity = '1';
                notification.style.transform = 'translateY(0)';
            }, 10);

            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateY(20px)';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 2000);
        }

        // Order functions
        function displayOrderSummary() {
            const orderSummary = document.getElementById('orderSummary');

            const items = cart.map(item => `
                <div class="summary-item">
                    <div>
                        <div style="font-weight: 600;">${item.name}</div>
                        <div style="color: #666;">${item.quantity} x ${item.price.toFixed(2)} €</div>
                    </div>
                    <div>${(item.price * item.quantity).toFixed(2)} €</div>
                </div>
            `).join('');

            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const shipping = 15.00;
            const total = subtotal + shipping;

            orderSummary.innerHTML = `
                <h3 style="margin-bottom: 1rem; color: var(--text-dark);">Résumé de la Commande</h3>
                ${items}
                <div class="summary-item">
                    <span>Sous-total</span>
                    <span>${subtotal.toFixed(2)} €</span>
                </div>
                <div class="summary-item">
                    <span>Frais de livraison</span>
                    <span>${shipping.toFixed(2)} €</span>
                </div>
                <div class="summary-item summary-total">
                    <span>Total</span>
                    <span>${total.toFixed(2)} €</span>
                </div>
            `;
        }

        function loadOrderMethods() {
            const orderMethods = document.getElementById('orderMethods');
            let methodsHTML = '';
            
            if (orderSettings.whatsappEnabled && orderSettings.whatsappNumber) {
                methodsHTML += `
                    <button class="order-btn btn-whatsapp" onclick="placeOrderViaWhatsApp()">
                        <i class="fab fa-whatsapp"></i>
                        Commander via WhatsApp
                    </button>
                `;
            }
            
            if (orderSettings.messengerEnabled && orderSettings.messengerLink) {
                methodsHTML += `
                    <button class="order-btn btn-messenger" onclick="placeOrderViaMessenger()">
                        <i class="fab fa-facebook-messenger"></i>
                        Commander via Messenger
                    </button>
                `;
            }
            
            if (orderSettings.directOrderEnabled) {
                methodsHTML += `
                    <button class="order-btn btn-direct" onclick="placeDirectOrder()">
                        <i class="fas fa-shopping-cart"></i>
                        Commander directement
                    </button>
                `;
            }
            
            orderMethods.innerHTML = methodsHTML;
        }

        function placeOrderViaWhatsApp() {
            const formData = getOrderFormData();
            if (!formData) return;
            
            const orderDetails = generateOrderDetails();
            const message = `*Nouvelle Commande*%0A%0A` +
                           `*Informations client:*%0A` +
                           `Nom: ${formData.firstName} ${formData.lastName}%0A` +
                           `Email: ${formData.email}%0A` +
                           `Téléphone: ${formData.phone}%0A` +
                           `Adresse: ${formData.address}, ${formData.city} ${formData.postalCode}%0A` +
                           `Instructions: ${formData.notes || 'Aucune'}%0A%0A` +
                           `*Détails de la commande:*%0A${orderDetails}`;
            
            const whatsappUrl = `https://wa.me/${orderSettings.whatsappNumber}?text=${message}`;
            window.open(whatsappUrl, '_blank');
            
            // Sauvegarder la commande dans Firebase
            saveOrderToFirebase(formData, 'whatsapp');
        }

        function placeOrderViaMessenger() {
            const formData = getOrderFormData();
            if (!formData) return;
            
            const orderDetails = generateOrderDetails();
            const message = `Nouvelle Commande\n\n` +
                          `Informations client:\n` +
                          `Nom: ${formData.firstName} ${formData.lastName}\n` +
                          `Email: ${formData.email}\n` +
                          `Téléphone: ${formData.phone}\n` +
                          `Adresse: ${formData.address}, ${formData.city} ${formData.postalCode}\n` +
                          `Instructions: ${formData.notes || 'Aucune'}\n\n` +
                          `Détails de la commande:\n${orderDetails}`;
            
            // Ouvrir Messenger avec le message pré-rempli
            alert("Commande préparée pour Messenger. Copiez ces détails:\n\n" + message);
            
            // Sauvegarder la commande dans Firebase
            saveOrderToFirebase(formData, 'messenger');
        }

        function placeDirectOrder() {
            const formData = getOrderFormData();
            if (!formData) return;
            
            // Sauvegarder la commande dans Firebase
            saveOrderToFirebase(formData, 'direct');
            
            // Afficher un message de confirmation
            alert(`Commande passée avec succès !\n\nNuméro de commande: ${Date.now()}\n\nMerci pour votre achat ! Vous recevrez un email de confirmation.`);
            
            // Vider le panier et retourner à l'accueil
            cart = [];
            updateCartCount();
            showHomePage();
        }

        function getOrderFormData() {
            const form = document.getElementById('orderForm');
            const formData = new FormData(form);
            const data = Object.fromEntries(formData.entries());
            
            // Validation des champs
            if (!data.firstName || !data.lastName || !data.email || !data.phone || 
                !data.address || !data.city || !data.postalCode) {
                alert("Veuillez remplir tous les champs obligatoires.");
                return null;
            }
            
            return data;
        }

        function generateOrderDetails() {
            let details = '';
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const shipping = 15.00;
            const total = subtotal + shipping;
            
            cart.forEach(item => {
                details += `- ${item.name} (x${item.quantity}): ${(item.price * item.quantity).toFixed(2)} €\n`;
            });
            
            details += `\nSous-total: ${subtotal.toFixed(2)} €\n`;
            details += `Livraison: ${shipping.toFixed(2)} €\n`;
            details += `Total: ${total.toFixed(2)} €`;
            
            return details;
        }

        async function saveOrderToFirebase(customerData, method) {
            try {
                if (database) {
                    const orderId = Date.now().toString();
                    const orderData = {
                        id: orderId,
                        customer: customerData,
                        items: cart,
                        method: method,
                        subtotal: cart.reduce((sum, item) => sum + (item.price * item.quantity), 0),
                        shipping: 15.00,
                        total: cart.reduce((sum, item) => sum + (item.price * item.quantity), 0) + 15,
                        date: new Date().toISOString(),
                        status: 'pending'
                    };

                    await database.ref('orders/' + orderId).set(orderData);
                    console.log('Commande sauvegardée dans Firebase:', orderId);
                    
                    // Vider le panier après sauvegarde réussie
                    cart = [];
                    updateCartCount();
                    showNotification('Commande passée avec succès !');
                    showHomePage();
                }
            } catch (error) {
                console.error('Erreur lors de la sauvegarde de la commande:', error);
                showNotification('Erreur lors de la sauvegarde de la commande', 'error');
            }
        }

        // Chat Bot
        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;

            addMessageToChat(message, 'user-message');
            input.value = '';

            // Réponse automatique
            setTimeout(() => {
                const response = getBotResponse(message);
                addMessageToChat(response, 'bot-message');
            }, 500);
        }

        function handleChatKeyPress(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        }

        function addMessageToChat(message, className) {
            const chatBody = document.getElementById('chatBody');
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${className}`;
            messageDiv.textContent = message;
            chatBody.appendChild(messageDiv);
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        function getBotResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            if (lowerMessage.includes('bonjour') || lowerMessage.includes('salut') || lowerMessage.includes('hello')) {
                return "Bonjour ! Bienvenue dans notre boutique en ligne. Comment puis-je vous aider ?";
            } else if (lowerMessage.includes('produit') || lowerMessage.includes('article') || lowerMessage.includes('achat')) {
                return "Nous proposons une large gamme de produits de qualité. Vous pouvez parcourir notre catalogue en cliquant sur 'Tous les Produits' dans le menu.";
            } else if (lowerMessage.includes('prix') || lowerMessage.includes('coût') || lowerMessage.includes('combien')) {
                return "Nos prix varient selon les produits. Vous pouvez voir les prix détaillés sur chaque fiche produit. N'hésitez pas à parcourir notre catalogue !";
            } else if (lowerMessage.includes('livraison') || lowerMessage.includes('expédition') || lowerMessage.includes('délai')) {
                return "Nous livrons dans tout le pays. Les délais de livraison sont généralement de 2 à 5 jours ouvrables. Les frais de livraison sont de 15€.";
            } else if (lowerMessage.includes('paiement') || lowerMessage.includes('payer') || lowerMessage.includes('carte')) {
                return "Nous acceptons les cartes bancaires, PayPal et le paiement à la livraison. Le paiement est sécurisé et protégé.";
            } else if (lowerMessage.includes('contact') || lowerMessage.includes('téléphone') || lowerMessage.includes('email')) {
                return "Vous pouvez nous contacter par téléphone au +212 5 00 00 00 00 ou par email à contact@magasin.ma. Nous sommes disponibles du lundi au vendredi de 9h à 18h.";
            } else if (lowerMessage.includes('merci') || lowerMessage.includes('au revoir') || lowerMessage.includes('bye')) {
                return "Merci de votre visite ! N'hésitez pas à nous contacter pour toute question supplémentaire. Bonne journée !";
            } else {
                return "Je suis désolé, je n'ai pas compris votre question. Pourriez-vous reformuler ou me poser une question sur nos produits, prix, livraison ou paiement ?";
            }
        }

        // Fonctions utilitaires
        function getCategoryName(category) {
            const categories = {
                'electronics': 'Électronique',
                'fashion': 'Mode',
                'home': 'Maison',
                'beauty': 'Beauté',
                'sports': 'Sports',
                'books': 'Livres',
                'other': 'Autre'
            };
            return categories[category] || category;
        }

        function getStockText(stock) {
            const stockTexts = {
                'available': 'En Stock',
                'low': 'Stock Limitée',
                'unavailable': 'Rupture de Stock'
            };
            return stockTexts[stock] || stock;
        }
    </script>
</body>
</html>